(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{420:function(e,a,n){"use strict";n.r(a);var t=n(7),r=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"什么是flume"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是flume"}},[e._v("#")]),e._v(" 什么是Flume")]),e._v(" "),a("blockquote",[a("p",[e._v("Flume is a distributed, reliable, and available service for efficiently collecting, aggregating, and moving large amounts of log data.")])]),e._v(" "),a("p",[e._v("Flume 是一种分布式、可靠且可用的服务，用于高效地收集、聚合和移动大量日志数据。由此可见，flume的应用场景是处理大量的日志数据。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1dfc4010ed684fd2aa153572a52ba24a~tplv-k3u1fbpfcp-watermark.image",alt:"image.png"}})]),e._v(" "),a("p",[e._v("其中框框部分就是Flume。"),a("br"),e._v("\n由Source、Channel、Sink三个核心组件组成。整体构成一个Agent。")]),e._v(" "),a("p",[e._v("名词解释：")]),e._v(" "),a("ul",[a("li",[e._v("Source：是负责接受数据到Agent的组件。")]),e._v(" "),a("li",[e._v("Channel：位于Source和Sink之间的缓冲区。")]),e._v(" "),a("li",[e._v("Sink：负责将事件从从Channel写入到其他地方。可以是另一个Agent也可以是存储系统。")]),e._v(" "),a("li",[e._v("Event：Flume以事件的形式传递数据。")])]),e._v(" "),a("h2",{attrs:{id:"demo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[e._v("#")]),e._v(" Demo")]),e._v(" "),a("h3",{attrs:{id:"安装-针对linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-针对linux"}},[e._v("#")]),e._v(" 安装（针对Linux）")]),e._v(" "),a("ol",[a("li",[e._v("官网下载 apache-flume-1.7.0-bin.tar.gz")]),e._v(" "),a("li",[e._v("解压 tar -zxf apache-flume-1.7.0-bin.tar.gz")])]),e._v(" "),a("h3",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[e._v("#")]),e._v(" 使用")]),e._v(" "),a("p",[e._v("主要是配置一个flume的配置文件，这里起名example.conf，规定以如下形式：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Name the components on this agent\na1.sources = r1 //定义了一个agent a1，r1为a1的source\na1.sinks = k1 //k1为a1的sink\na1.channels = c1 //c1为a1的channel\n\n# Describe/configure the source\na1.sources.r1.type = netcat #source r1的类型为netcat\na1.sources.r1.bind = localhost #source r1绑定的地址\na1.sources.r1.port = 44444 #source r1绑定的端口\n\n# Describe the sink\na1.sinks.k1.type = logger #sink k1的类型\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory #channel c1的类型\na1.channels.c1.capacity = 1000 #channel c1的容量\na1.channels.c1.transactionCapacity = 100 #channel c1的事务容量\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1 #source r1和channel c1绑定\na1.sinks.k1.channel = c1 #sink k1和channel c1绑定\n")])])]),a("p",[e._v("启动命令："),a("br"),e._v(" "),a("code",[e._v("bin/flume-ng agent --conf conf --conf-file example.conf --name a1 -Dflume.root.logger=INFO,console")])]),e._v(" "),a("h2",{attrs:{id:"组件种类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件种类"}},[e._v("#")]),e._v(" 组件种类")]),e._v(" "),a("p",[e._v("以下列举的是常用的组件类型，有用到其他的类型可以通过官网直接直接搜索类型查看详情")]),e._v(" "),a("h3",{attrs:{id:"source"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#source"}},[e._v("#")]),e._v(" source")]),e._v(" "),a("ul",[a("li",[e._v("avro：用于接收从另一个flume（agent）中收到的数据")]),e._v(" "),a("li",[e._v("exec：用于接收从命令中获取的数据，如结合命令tail -f使用")]),e._v(" "),a("li",[e._v("netcat：用于接收端口传来的数据")]),e._v(" "),a("li",[e._v("spooling directory：用于接收文件变动的数据")])]),e._v(" "),a("h3",{attrs:{id:"channel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#channel"}},[e._v("#")]),e._v(" channel")]),e._v(" "),a("ul",[a("li",[e._v("memory channel 内存，速度快，但宕机时有数据丢失的风险")]),e._v(" "),a("li",[e._v("file channel 速度比较慢，但安全")]),e._v(" "),a("li",[e._v("kafka channel")])]),e._v(" "),a("h3",{attrs:{id:"sink"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sink"}},[e._v("#")]),e._v(" sink")]),e._v(" "),a("ul",[a("li",[e._v("avro 输出到另一个flume（agent）")]),e._v(" "),a("li",[e._v("hdfs 输出到hdfs")]),e._v(" "),a("li",[e._v("logger 日志形式输出")]),e._v(" "),a("li",[e._v("file 文件形式落地")])]),e._v(" "),a("blockquote",[a("p",[e._v("To be continue...")])]),e._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://flume.apache.org/releases/content/1.9.0/FlumeUserGuide.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Flume官网用户使用手册"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);