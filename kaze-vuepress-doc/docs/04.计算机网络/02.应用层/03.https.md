---
title: HTTPS
date: 2023-03-21 18:22:20
permalink: /pages/43e2c1/
---



## HTTP 和 HTTPS 的区别

- HTTP使用的**80**端口，HTTPS使用的是**443**端口
- HTTP协议不提供任何方式的数据加密，HTTPS在HTTP协议的基础上加入了**SSL/TSL**协议（在应用层和传输层之间添加了安全层）
- HTTPS协议需要向CA（证书权威机构）申请数字证书，来保证服务器的身份是可信的

## HTTPS的特点

- **混合加密（对称加密和非对称加密结合）**

  通信建立前采用非对称加密的方式交换会话密钥，后续将不再使用非对称加密。通信过程中使用对称加密的会话密钥的方式加密明文数据。

  为什么要使用混合加密的方式

  对称加密使用一个密钥，运行速度快，密钥必须保密，无法做到安全的密钥交换。非对称加密使用两个密钥，公钥和私钥，公钥可以任意分发而私钥保密，解决了密钥交换问题但是速度慢。

- **摘要算法**

  要来验证数据的完整性

  传输之前将明文使用摘要算法进行加密生成摘要，然后**将明文和摘要**通过会话密钥进行加密后传输给对方，对方使用会话密钥解密之后，对明文再次进行摘要算法，对比先后生成的摘要是否一致来验证传输数据的完整性

- 数字证书

1. 申请证书：申请人向数字证书颁发机构（CA）提交证书申请，并提供必要的身份信息，如姓名、公司名称、邮箱地址等。
2. 身份验证：CA会对申请人进行身份验证，以确保申请人的身份真实可信，一般包括验证身份证明、联系公司等方式。
3. 生成密钥对：CA为申请人生成密钥对（公钥和私钥），公钥用于加密数据，私钥用于解密数据。
4. 证书签名：CA使用**自己的私钥**对**申请人的公钥和身份信息**进行数字签名，生成数字证书。
5. 证书发布：CA将数字证书发布到证书发布系统中，申请人可以通过下载证书获得自己的公钥和数字签名等信息。
6. 证书验证：其他用户（如浏览器）在与申请人进行通信时，会通过CA的数字证书验证申请人的身份和公钥的真实性，并确保通信过程的安全和完整性。

## HTTPS流程

1. 客户端发起HTTPS请求：客户端向服务器发起HTTPS请求，请求连接到服务器。（先进行TCP三次握手）
2. 服务器响应请求：服务器接收到客户端请求后，返回数字证书（包含服务器的公钥）。
3. 客户端验证证书：客户端使用数字证书验证服务器的身份，并检查证书的有效性和完整性。
4. 客户端生成随机密钥：客户端生成一个随机的对称密钥（会话密钥），用于加密通信过程中的数据。
5. 客户端使用服务器公钥加密密钥：客户端使用服务器公钥对随机生成的对称密钥进行加密，然后将加密后的密钥发送给服务器。
6. 服务器使用私钥解密密钥：服务器使用自己的私钥对接收到的加密密钥进行解密，得到对称密钥。
7. 客户端与服务器开始加密通信：客户端和服务器使用对称密钥进行加密通信，确保通信过程的安全性和隐私性。
8. 通信结束：客户端和服务器在通信结束时，关闭连接。
