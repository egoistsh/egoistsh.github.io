---
title: IP
date: 2023-03-21 20:54:06
permalink: /pages/42791d/
---



IP的作用是在复杂的网络环境中将数据包发送给最终目的的主机

## IP划分

**IP划分的优势**

如果网络号相同表示在同一个本地网络上，可以直接把数据包发送到目标主机。如果不同，网络号也可以配合路由来进行寻址工作。

**ABCDE类**、**CIDR**、**子网掩码**均可对IP进行分类：

### ABCDE类网络

ABC类划分为网络号+主机号，分别A类1+7+24，B类2+14+16，C类3+21+8

D类用于多播

E类保留

主机号全为1表示广播（本地广播和直接广播），主机号全为0表示某个网络

优势：ABC类的划分，可以仅仅依靠头部几位数字判断出是哪类网络，并可以很快找出网络地址和主机地址

缺点：ABC类不能很好的实现显示网络匹配，C类太少，B类太多

### CIDR

32位地址仅被划分为**网络号**+**主机号**：a.b.c.d/x(前x位是网络号)

有点：用于很好的实现主机数目的划分

### 子网掩码

既可以用来划分**网络号**+**主机号**，又可以进一步划分主机号，划分为**子网网络地址**+**子网主机地址**

优势：通过**划分子网**，可以1.节约IP地址，避免浪费。2.提高网络性能。3.可以保证网络的安全。4.易于扩大地理范围，有助于覆盖大型地理区域。

## 公/私有IP

ipconfig查出来的是私有IP，只能在局域网中使用，不能上网。

百度搜索出来的是共有IP，能上网，一般是运营商的。

## NAT

- NAT（Network Address Translation）网络地址转换

  私有IP在对外部通信的时候，将私有IP转化为NAT路由器的公有IP，解决IP地址不足的问题。

- NAPT（Network Address and Port Translation）网络地址端口转换

  私有IP在对外部通信的时候，将私有IP转化为NAT路由器的公有IP+独一无二的端口号（并将私有IP和公有IP+端口号记录在转换表中，连接结束以后再转换表中删除）

  缺点：

  1.外部无法主动与NAT内部服务器建立连接，因为NAPT转换表没有转换记录

  2.转换表的生成与转换操作都会产生性能的开销

  3.通信过程中，如果NAT路由器重启，所有TCP连接都将被重制

  解决方法：

  NAT穿透技术：客户端主动从NAT设备获取公有IP地址，然后自己建立端口映射条目，然后用这个条目对外通信。
